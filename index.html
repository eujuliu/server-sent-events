<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Server Sent Event</title>
  </head>

  <body>
    <div class="event-data" id="data"></div>
  </body>

  <script>
    var stream = new EventSource(
      "http://localhost:8081/events?userId=34870c42-fca8-409a-aa27-e9e2510cb596",
    );

    stream.onopen = function (event) {
      console.log(event);
    };
    stream.onmessage = function (event) {
      console.log(JSON.parse(event.data));
      document.getElementById("data").innerText = event.data;
    };
    stream.onerror = function (event) {
      console.log(event);
      stream.close();
    };
  </script>
</html>
